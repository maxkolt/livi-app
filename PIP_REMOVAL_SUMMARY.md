# –£–¥–∞–ª–µ–Ω–∏–µ PiP (Picture-in-Picture) –∏–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏:

### 1. –£–¥–∞–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
- ‚ùå `frontend/utils/PiPContext.tsx` - –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–∫—Å—Ç PiP
- ‚ùå `frontend/components/FloatingCallCard.tsx` - –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–ª–∞–≤–∞—é—â–µ–≥–æ –æ–∫–Ω–∞ PiP

### 2. –û—á–∏—â–µ–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:

#### `frontend/App.tsx`:
- ‚ùå –£–¥–∞–ª–µ–Ω –∏–º–ø–æ—Ä—Ç `PiPProvider` –∏ `usePiP`
- ‚ùå –£–¥–∞–ª–µ–Ω –∏–º–ø–æ—Ä—Ç `FloatingCallCard`
- ‚ùå –£–¥–∞–ª–µ–Ω `PiPProvider` –æ–±–µ—Ä—Ç–∫–∞
- ‚ùå –£–¥–∞–ª–µ–Ω —Ä–µ–Ω–¥–µ—Ä `FloatingCallCard`

#### `frontend/components/VideoChat.tsx`:
- ‚ùå –£–¥–∞–ª–µ–Ω –∏–º–ø–æ—Ä—Ç `usePiP`
- ‚ùå –£–¥–∞–ª–µ–Ω—ã –≤—Å–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `pipContext`
- ‚ùå –£–¥–∞–ª–µ–Ω—ã –≤—Å–µ –≤—ã–∑–æ–≤—ã `pipContext.showPiP()`
- ‚ùå –£–¥–∞–ª–µ–Ω—ã –≤—Å–µ –≤—ã–∑–æ–≤—ã `pipContext.hidePiP()`
- ‚ùå –£–¥–∞–ª–µ–Ω—ã –≤—Å–µ –≤—ã–∑–æ–≤—ã `pipContext.clearSavedStreams()`
- ‚ùå –£–¥–∞–ª–µ–Ω—ã –≤—Å–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ PiP —Å–æ–±—ã—Ç–∏–π
- ‚ùå –£–¥–∞–ª–µ–Ω—ã –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç PiP –≤ useEffect
- ‚ùå –£–¥–∞–ª–µ–Ω—ã –≤—Å–µ —É–ø–æ–º–∏–Ω–∞–Ω–∏—è PiP –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–∏
- ‚ùå –£–¥–∞–ª–µ–Ω—ã –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ `isPiPActive`
- ‚ùå –£–¥–∞–ª–µ–Ω—ã –≤—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã `fromPiP`

#### `frontend/navigation/types.ts`:
- ‚ùå –£–¥–∞–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `fromPiP?` –∏–∑ —Ç–∏–ø–∞ `VideoChat`

### 3. –û—á–∏—â–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
- ‚ùå –£–¥–∞–ª–µ–Ω—ã –≤—Å–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ PiP —Å–æ–±—ã—Ç–∏–π (`pip:entered`, `pip:exited`)
- ‚ùå –£–¥–∞–ª–µ–Ω—ã –≤—Å–µ callback'–∏ –¥–ª—è PiP (`onEndCall`, `onReturnToCall`)
- ‚ùå –£–¥–∞–ª–µ–Ω—ã –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è PiP
- ‚ùå –£–¥–∞–ª–µ–Ω—ã –≤—Å–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–∞—Ä—Ç–Ω–µ—Ä–∞ –æ –ø–µ—Ä–µ—Ö–æ–¥–µ –≤ PiP —Ä–µ–∂–∏–º

### 4. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏:
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤—Å–µ TypeScript –æ—à–∏–±–∫–∏
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ useEffect
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤—Å–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç:

**–í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ Picture-in-Picture –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª–µ–Ω—ã –∏–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.**

–¢–µ–ø–µ—Ä—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ PiP —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏:
- –í–∏–¥–µ–æ–∑–≤–æ–Ω–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç —Ç–æ–ª—å–∫–æ –≤ –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–º —Ä–µ–∂–∏–º–µ
- –ü—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –Ω–∞ –¥—Ä—É–≥–æ–π —ç–∫—Ä–∞–Ω –∑–≤–æ–Ω–æ–∫ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è –≤ —Ñ–æ–Ω–µ
- –ù–µ—Ç –ø–ª–∞–≤–∞—é—â–µ–≥–æ –æ–∫–Ω–∞ —Å –≤–∏–¥–µ–æ
- –£–ø—Ä–æ—â–µ–Ω–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–≤–æ–Ω–∫–∞–º–∏

## üì± –¢–µ–∫—É—â–µ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:

1. **–ò–Ω–∏—Ü–∏–∞—Ü–∏—è –∑–≤–æ–Ω–∫–∞** - —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ
2. **–ü—Ä–∏–Ω—è—Ç–∏–µ –∑–≤–æ–Ω–∫–∞** - —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ  
3. **–ê–∫—Ç–∏–≤–Ω—ã–π –∑–≤–æ–Ω–æ–∫** - —Ç–æ–ª—å–∫–æ –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º
4. **–ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –¥—Ä—É–≥–æ–π —ç–∫—Ä–∞–Ω** - –∑–≤–æ–Ω–æ–∫ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è –≤ —Ñ–æ–Ω–µ
5. **–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∑–≤–æ–Ω–∫–∞** - —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ

–í—Å–µ –≤–∏–¥–µ–æ–∑–≤–æ–Ω–∫–∏ –¥—Ä—É–∑—å—è–º –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –±–µ–∑ PiP —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏! üöÄ
